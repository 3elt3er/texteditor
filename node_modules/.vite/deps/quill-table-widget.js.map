{
  "version": 3,
  "sources": ["../../quill-table-widget/index.js"],
  "sourcesContent": ["import Quill from \"quill\";\nimport \"./widget.css\";\nimport \"./hover.css\";\n\nexport default function Widget(quill, options) {\n\tconst toolbar = quill.getModule(\"toolbar\");\n\tconst toolbarButton = getToolbarButton(quill, options);\n\tif (options.toolbarOffset && !!parseInt(options.toolbarOffset)) {\n\t\tconst ref = Array.from(toolbar.container.children).at(parseInt(options.toolbarOffset));\n\t\ttoolbar.container.insertBefore(toolbarButton, ref);\n\t} else {\n\t\ttoolbar.container.appendChild(toolbarButton);\n\t}\n\n\taddWidget(quill);\n\n\tquill.on(Quill.events.SELECTION_CHANGE, () => {\n\t\tconst tableModule = quill.getModule(\"table\");\n\t\tconst table = tableModule.getTable()[0];\n\t\tif (table) {\n\t\t\t//we are in a table\n\t\t\tconst index = quill.getIndex(table.rows()[0]); //get location of first row\n\t\t\tconst bounds = quill.getBounds(index); //get bounds\n\t\t\tshowWidget(bounds);\n\t\t} else {\n\t\t\t//we are not in a table\n\t\t\thideWidget();\n\t\t}\n\t});\n}\n\nconst makeTable = (quill, x, y) => {\n\tconst tableModule = quill.getModule(\"table\");\n\tif (!quill.getSelection()) {\n\t\t//need to set selection if there is none\n\t\tquill.setSelection(0); //i.e. field hasnt been clicked\n\t}\n\ttableModule.insertTable(x, y);\n\tconst bounds = quill.getBounds(quill.getSelection());\n\tshowWidget(bounds); //show widget as table will be under cursor\n};\n\nconst hideWidget = () => {\n\tdocument.getElementById(\"wi-widget\").setAttribute(\"class\", \"ql-tablewidget ql-hidden\");\n};\n\nconst showWidget = bounds => {\n\tconst widget = document.getElementById(\"wi-widget\");\n\twidget.style.top = bounds.top - 11 + \"px\"; //position widget (11px is half its height)\n\twidget.style.right = \"4px\"; //4px is the margin (15px) minus half its width (again 11px)\n\twidget.setAttribute(\"class\", \"ql-tablewidget\"); //unhide widget\n};\n\nconst addWidget = quill => {\n\tconst container = quill.addContainer(\"ql-tablewidget\");\n\tcontainer.setAttribute(\"id\", \"wi-widget\");\n\tcontainer.setAttribute(\"class\", \"ql-tablewidget ql-hidden\");\n\tcontainer.innerHTML = `<button class=\"wi-menu-button\"><svg viewBox=\"0 0 18 18\">\n\t\t<line class=\"ql-stroke\" x1=\"4\" x2=\"14\" y1=\"4\" y2=\"4\"></line>\n\t\t<line class=\"ql-stroke\" x1=\"4\" x2=\"14\" y1=\"9\" y2=\"9\"></line>\n\t\t<line class=\"ql-stroke\" x1=\"4\" x2=\"14\" y1=\"14\" y2=\"14\"></line>\n\t</svg>\n\t</button>\n\t<div class=\"wi-menu\">\n\t\t<div id=\"wi-add-row\">Insert Row</div>\n\t\t<div id=\"wi-add-column\">Insert Column</div>\n\t\t<div id=\"wi-delete-row\">Delete Row</div>\n\t\t<div id=\"wi-delete-column\">Delete Column</div>\n\t\t<div id=\"wi-delete-table\">Delete Table</div>\n\t</div>`;\n\tconst tableModule = quill.getModule(\"table\");\n\tdocument\n\t\t.getElementById(\"wi-add-row\")\n\t\t.addEventListener(\"click\", () => tableModule.insertRowBelow());\n\n\tdocument\n\t\t.getElementById(\"wi-add-column\")\n\t\t.addEventListener(\"click\", () => tableModule.insertColumnRight());\n\n\tdocument.getElementById(\"wi-delete-row\").addEventListener(\"click\", () => {\n\t\ttableModule.deleteRow();\n\t\tif (!tableModule.getTable[0]) {\n\t\t\thideWidget();\n\t\t}\n\t});\n\n\tdocument.getElementById(\"wi-delete-column\").addEventListener(\"click\", () => {\n\t\ttableModule.deleteColumn();\n\t\tif (!tableModule.getTable[0]) {\n\t\t\thideWidget();\n\t\t}\n\t});\n\n\tdocument.getElementById(\"wi-delete-table\").addEventListener(\"click\", () => {\n\t\ttableModule.deleteTable();\n\t\thideWidget();\n\t});\n};\n\nconst getToolbarButton = (quill, options) => {\n\tconst span = document.createElement(\"span\");\n\tspan.setAttribute(\"class\", \"ql-formats\");\n\n\tconst button = document.createElement(\"button\");\n\tbutton.setAttribute(\"class\", \"wi-toolbar-button\");\n\tbutton.innerHTML = `<svg viewBox=\"0 0 18 18\">\n\t\t<rect class=\"ql-fill\" height=\"5\" width=\"12\" x=\"3\" y=\"1\"></rect>\n\t\t<line class=\"ql-stroke\" x1=\"3\" x2=\"3\" y1=\"2\" y2=\"15\"></line>\n\t\t<line class=\"ql-stroke\" x1=\"15\" x2=\"15\" y1=\"2\" y2=\"15\"></line>\n\t\t<line class=\"ql-stroke\" x1=\"9\" x2=\"9\" y1=\"3\" y2=\"15\"></line>\n\t\t<line class=\"ql-stroke\" x1=\"3\" x2=\"15\" y1=\"10\" y2=\"10\"></line>\n\t\t<line class=\"ql-stroke\" x1=\"3\" x2=\"15\" y1=\"15\" y2=\"15\"></line>\n\t</svg>`;\n\tspan.appendChild(button);\n\n\tconst tooltip = document.createElement(\"div\");\n\ttooltip.setAttribute(\"class\", \"wi-tooltip\");\n\tlet d = [5, 6]; //default\n\tif (options.maxSize) {\n\t\tconst u = [parseInt(options.maxSize?.[0]), parseInt(options.maxSize?.[1])];\n\t\t//if valid inputs\n\t\tif (u[0] && u[1]) {\n\t\t\t//clamp to range\n\t\t\td = [[2, u[0], 12].sort((a, b) => a - b)[1], [2, u[1], 12].sort((a, b) => a - b)[1]];\n\t\t}\n\t}\n\t//style text to take up one grid column\n\ttooltip.innerHTML = `<p id=\"wi-tooltip-header\" style=\"grid-column: 1/${d[0] + 1}\">New Table</p>`;\n\ttooltip.style.gridTemplateColumns = \"1fr \".repeat(d[0]); //set grid width\n\n\tfor (let i = d[1]; i > 0; i--) {\n\t\tfor (let j = d[0]; j > 0; j--) {\n\t\t\t//do in reverse order so CSS ~ selector works\n\t\t\tlet createButton = document.createElement(\"div\");\n\t\t\tcreateButton.setAttribute(\"class\", `wicol-${j} wi-addtable`);\n\t\t\tcreateButton.addEventListener(\"pointerenter\", () => {\n\t\t\t\tdocument.getElementById(\"wi-tooltip-header\").innerText = `New Table: ${j}x${i}`;\n\t\t\t});\n\t\t\tcreateButton.addEventListener(\"pointerleave\", () => {\n\t\t\t\tdocument.getElementById(\"wi-tooltip-header\").innerText = `New Table`;\n\t\t\t});\n\t\t\tcreateButton.addEventListener(\"click\", () => {\n\t\t\t\tmakeTable(quill, i, j);\n\t\t\t});\n\t\t\tcreateButton.style.order = i * d[0] + j; //fix order\n\t\t\ttooltip.appendChild(createButton);\n\t\t}\n\t}\n\tspan.appendChild(tooltip);\n\treturn span;\n};\n"],
  "mappings": "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",
  "names": []
}
